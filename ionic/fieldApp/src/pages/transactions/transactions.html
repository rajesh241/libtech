<ion-header>
  <ion-navbar>
    <ion-item>
      <ion-title item-left>Transactions</ion-title>
      <button ion-button item-right default (click)="goHome()">Home</button>
    </ion-item>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h1>{{ jobcard }}</h1>
  <h4>Members of the family</h4>

  <span *ngFor="let detail of applicantDetails | async">
    
    <b>{{detail.$key}}. {{detail.name}}</b> <br />

    <button ion-button (click)="show = !show">{{show ? 'hide' : 'View details'}}</button>
    <br>
    <div *ngIf="show">
      <b>Phone</b>: {{ detail.phone }} <br />
      <b>Age</b>: {{detail.age}} <br />
      <b>Caste</b>: {{detail.caste}} <br />
      <b>Gender</b>: {{detail.gender}} <br />
      <b>Account Number</b>: {{detail.accountNo}} <br />
      <b>Branch Code</b>: {{detail.bankBranchCode}} <br />
      <b>Branch Name</b>: {{detail.bankBranchName}} <br />
      <b>Bank Code</b>: {{detail.bankCode}} <br />
      <b>Bank Name</b>: {{detail.bankName}} <br />
      <b>Post Office Account Name</b>: {{detail.poAccountName}} <br />
      <b>Post office Address</b>: {{detail.poAddress}} <br />
      <b>UID</b>: {{detail.uid}} <br />

    </div>

    <span *ngIf="!detail.phone">
      
      <p><b>Please collect a phone number for this jobcard holder</b>
	<ion-item>
	  <input item-left #phoneInput type="textarea" placeholder="{{ detail.phone }}" (input)="phone=phoneInput.value; updated=false"> [{{ detail.$key }}]{{ phone }}
	  <button ion-button item-right default [disabled]="updated" (click)=update(detail.$key)>Update</button>
	</ion-item>
      </p>
    </span>
    
    <hr />    
  </span>

  <h4>List of Transactions</h4>
  <span *ngFor="let item of items | async">
    <p>
      <span *ngIf="item">
	<button ion-button [navPush]="transactionPage" [navParams]="{ jobcard: jobcard, key: item.$key, transaction: item, url: url}">{{ item.dateTo }}</button> 	{{item.workName}}

      </span>
    </p>
  </span>
</ion-content>

<ion-footer>
  <ion-item>
    <button ion-button item-left default navPop>Back</button>
    <button ion-button item-right default (click)="goHome()">Home</button>
  </ion-item>
</ion-footer>
