<ion-header>
  <ion-navbar>
    <ion-title>
      Libtech Reports Drill Down
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h1>Field Reports App</h1>
  <div *ngIf ="!getUser()"><p>You are not logged in!</p>
      <button ion-button round [navPush]="loginPage">Login</button>
  </div>
  <div *ngIf="getUser()">
    <ion-item>
      <ion-avatar item-left *ngIf="user.picture">
	<img [src]="user.picture">
      </ion-avatar>
      <h2>{{ user.email }}</h2>
      <ion-icon name="arrow-forward" item-right></ion-icon>
    </ion-item>

    <!-- FIXME
    <ion-searchbar (input)="search($event)"></ion-searchbar>
    -->
      <p>Please select the panchayats you wish to sync</p>
      <p *ngFor="let panchayat of panchayats | async"  (click)="choosePanchayat(selectPanchayat, panchayat.$key, panchayat.$key)"> <input type="checkbox" [checked]="panchayatSelected[panchayat.$key]"><button ion-button #selectPanchayat>{{ panchayat.$key }}</button></p>

    <button ion-button (click)="syncPanchayats()">Sync</button>
    <button ion-button [navPush]="panchayatsPage" [navParams]="panchayatsChosen">View</button>
  </div>
</ion-content>
<ion-footer>
  <button *ngIf="!getUser()" ion-button round [navPush]="loginPage">Login</button>
  <button *ngIf="getUser()" ion-button round (click)="logout()">Logout</button>
</ion-footer>
