<ion-header>
  <ion-navbar>
    <ion-title>
      Field Reports App
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <div *ngIf ="!getUser()"><p>You are not logged in!</p>
      <button ion-button [navPush]="loginPage">Login</button>
  </div>
  <div *ngIf="getUser()">
    <!-- FIXME
    <ion-searchbar (input)="search($event)"></ion-searchbar>
    -->
    <p>Please select the panchayats you wish to sync</p>

    <div class="row">
      <div class="col">Panchayat Name</div>
      <div class="col">Sync</div>
    </div>
    <div class="row" *ngFor="let panchayat of panchayats | async">
      <div class="col">
	<button ion-button #selectPanchayat [navPush]="jobcardsPage" [navParams]="{panchayatName: panchayat.$key}">{{ panchayat.$key }}</button>
      </div>
      <div class="col">
	<input type="checkbox" [checked]="panchayatSelected[panchayat.$key]" (click)="choosePanchayat(selectPanchayat, panchayat.$key, panchayat.$key)">
      </div>
    </div>
    <!--
    <p *ngFor="let panchayat of panchayats | async">
      <button ion-button #selectPanchayat [navPush]="jobcardsPage" [navParams]="{panchayatName: panchayat.$key}">{{ panchayat.$key }}</button>
      <input type="checkbox" [checked]="panchayatSelected[panchayat.$key]" (click)="choosePanchayat(selectPanchayat, panchayat.$key, panchayat.$key)">
    </p>
    -->

    <button ion-button [disabled]="!checked || synced" (click)="syncPanchayats()">Sync</button>
    <button ion-button [disabled]="!checked" [navPush]="panchayatsPage" [navParams]="panchayatsChosen">View</button>

    <!-- To give padding at the bottom (FIXME) -->
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
  </div>
</ion-content>
<ion-footer>
  <div *ngIf="getUser()">
    <ion-item>
      <ion-avatar item-left *ngIf="user.picture">
	<img [src]="user.picture">
      </ion-avatar>
      <h2 item-left>{{ user.email }}</h2>
    <button float ion-button item-right default (click)="logout()">Logout</button>
    </ion-item>
  </div>
</ion-footer>
