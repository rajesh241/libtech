<ion-header>

  <ion-navbar>
    <ion-item>
      <ion-title item-left>Jobcards</ion-title>
      <button ion-button item-right default (click)="goHome()">Home</button>
    </ion-item>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h4>For Panchayat [{{ panchayatSlug }}]</h4>
  <!--
  {{ meta['75daysOrMore'] }}
  <div *ngFor="let meta of metaObject | async">
    {{ meta }}
  </div>
  -->
  <div *ngFor="let field of metaObservable|async">
    <ion-item *ngIf="field.$value != ''"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
    <ion-item *ngIf="field.$value == ''"><b>{{ field.$key }}</b>:
      <div *ngFor="let village of field.$key.villages">
        <ion-item *ngIf="village.$value != ''"><b>{{ village.$key }}</b>: {{ field.$value }}</ion-item>
      </div>
    </ion-item>
  </div>
  <!--
  <p><b>Total jobcards:</b> {{ meta.total_jobcards }}</p>
  <p><b>Total workers:</b> {{ meta.total_workers }}</p>
  -->
  <!-- {{ jobcards|async|json }} -->
  <hr />
  <div *ngFor="let jobcards of jobcardsObservable|async">
    <button ion-button (click)="expandJobcards(jobcards.$key)">{{ jobcards.$key }}</button>
      <expandable [expandHeight]="expandHeight" [expanded]="expanded[jobcards.$key]">
	<div *ngFor="let jobcardKey of jobcards|keys">
	  <button ion-button [navPush]="transactionsPage" [navParams]="{jobcard: jobcards[jobcardKey].jobcard}">{{ jobcardKey }}</button>
	</div>
      </expandable>
     <!--
    <p *ngFor="let key of jobcards | keys">
      {{ key }}
    </p>
    <div *ngFor="let jobcardKey of jobcards | keys">
      {{ jobcardKey }}
    </div>
    <p *ngFor="let jobcard of villages"> {{ jobcard }}
      <button ion-button [navPush]="transactionsPage" [navParams]="{panchayatSlug: villages.panchayatSlug, jobcardSlug: jobcard.jobcardSlug}">{{ jobcard.jobcardSlug }}</button>
    </p>
      -->
  </div>
</ion-content>

<ion-footer>
  <ion-item>
    <button ion-button item-left default navPop>Back</button>
    <button ion-button item-right default (click)="goHome()">Home</button>
  </ion-item>
</ion-footer>
