<ion-header>

  <ion-navbar>
    <ion-item>
      <ion-title item-left>Jobcards</ion-title>
      <button ion-button item-right default (click)="goHome()">Home</button>
    </ion-item>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h4>For Panchayat [{{ panchayatSlug }}]</h4>
  <b>Summary:</b>
  <div *ngFor="let field of metaObservable|async">
    <ion-item *ngIf="field.$value"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
  </div>
  
  <b>Financial Year 2015-16:</b>
  <div *ngFor="let field of finyear16Observable|async">
    <ion-item *ngIf="field.$value != ''"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
    <ion-item *ngIf="field.$value == ''"><b>{{ field.$key }}</b>:
      <div *ngFor="let item of field.$value">
        <ion-item *ngIf="item.$value != ''"><b>{{ item.$key }}</b>: {{ item.$value }}</ion-item>
      </div>
    </ion-item>
  </div>
  
  <b>Financial Year 2016-17:</b>
  <div *ngFor="let field of finyear17Observable|async">
    <ion-item *ngIf="field.$value != ''"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
    <ion-item *ngIf="field.$value == ''"><b>{{ field.$key }}</b>:
      <div *ngFor="let item of field.$value">
        <ion-item *ngIf="item.$value != ''"><b>{{ item.$key }}</b>: {{ item.$value }}</ion-item>
      </div>
    </ion-item>
  </div>
  
  <b>Financial Year 2017-18:</b>
  <div *ngFor="let field of finyear18Observable|async">
    <ion-item *ngIf="field.$value != ''"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
    <ion-item *ngIf="field.$value == ''"><b>{{ field.$key }}</b>:
      <div *ngFor="let item of field.$value">
        <ion-item *ngIf="item.$value != ''"><b>{{ item.$key }}</b>: {{ item.$value }}</ion-item>
      </div>
    </ion-item>
  </div>
  
  <b>People Who Worked More than 75 Days:</b>
  <div *ngFor="let field of dayOrMoreObservable|async">
    <ion-item *ngIf="field.$value != ''"><b>{{ field.$key }}</b>: {{ field.$value }}</ion-item>
    <ion-item *ngIf="field.$value == ''"><b>{{ field.$key }}</b>:
      <div *ngFor="let item of field.$value">
        <ion-item *ngIf="item.$value != ''"><b>{{ item.$key }}</b>: {{ item.$value }}</ion-item>
      </div>
    </ion-item>
  </div>
  <!--
  <p><b>Total jobcards:</b> {{ meta.total_jobcards }}</p>
  <p><b>Total workers:</b> {{ meta.total_workers }}</p>
  -->
  <!-- {{ jobcards|async|json }} -->
  <hr />
  <div *ngFor="let jobcards of jobcardsObservable|async">
    <button ion-button (click)="expandJobcards(jobcards.$key)">{{ jobcards.$key }}</button>
      <expandable [expandHeight]="expandHeight" [expanded]="expanded[jobcards.$key]">
	<div *ngFor="let jobcardKey of jobcards|keys">
	  <button ion-button [navPush]="transactionsPage" [navParams]="{jobcard: jobcards[jobcardKey].jobcard, url : url + '/' + jobcards.$key + '/' + jobcardKey}">{{ jobcardKey }}</button>
	</div>
      </expandable>
     <!--
    <p *ngFor="let key of jobcards | keys">
      {{ key }}
    </p>
    <div *ngFor="let jobcardKey of jobcards | keys">
      {{ jobcardKey }}
    </div>
    <p *ngFor="let jobcard of villages"> {{ jobcard }}
      <button ion-button [navPush]="transactionsPage" [navParams]="{panchayatSlug: villages.panchayatSlug, jobcardSlug: jobcard.jobcardSlug}">{{ jobcard.jobcardSlug }}</button>
    </p>
      -->
  </div>
</ion-content>

<ion-footer>
  <ion-item>
    <button ion-button item-left default navPop>Back</button>
    <button ion-button item-right default (click)="goHome()">Home</button>
  </ion-item>
</ion-footer>
