<ion-header>
  <ion-navbar>
    <ion-title>
      Libtech Reports Drill Down
    </ion-title>
  </ion-navbar>
</ion-header>

<ion-content padding>
  <h1>Field Reports App</h1>
  <div *ngIf ="!getUser()"><p>You are not logged in!</p>
      <button ion-button round [navPush]="loginPage">Login</button>
  </div>
  <div *ngIf="getUser()">
    <ion-item>
      <ion-avatar item-left *ngIf="user.picture">
	<img [src]="user.picture">
      </ion-avatar>
      <h2>{{ user.email }}</h2>
      <ion-icon name="arrow-forward" item-right></ion-icon>
    </ion-item>
    <!-- <ion-item>{{ user.email }} </ion-item> -->

    <ion-searchbar (input)="search($event)"></ion-searchbar>

      <p>Please select the panchayats you wish to follow:</p>
      <ion-list>
	<ion-item *ngFor="let panchayat of panchayats; let i = index"> <input type="checkbox" [checked]="panchayatSelected[i]"><button ion-button (click)="gotoPanchayat(selectPanchayat, i, panchayat)" #selectPanchayat>{{ panchayat }}</button></ion-item>
      </ion-list>  

    <button ion-button [navPush]="panchayatsPage" [navParams]="panchayats">Panchayats</button>
  </div>
</ion-content>
<ion-footer>
  <button *ngIf="!getUser()" ion-button round [navPush]="loginPage">Login</button>
  <button *ngIf="getUser()" ion-button round (click)="logout()">Logout</button>
</ion-footer>
